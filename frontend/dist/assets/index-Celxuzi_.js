(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const p of t.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function c(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=c(e);fetch(e.href,t)}})();const l=document.getElementById("textBtn"),r=document.getElementById("fileBtn"),v=document.getElementById("textInput"),i=document.getElementById("fileInput"),a=document.getElementById("file"),x=document.getElementById("email"),E=document.getElementById("form"),f=document.getElementById("resultContainer"),g=document.getElementById("category"),L=document.getElementById("result"),d=document.getElementById("loader"),u=document.getElementById("classifyButton"),m=document.getElementById("classifyText");function y(){v.classList.remove("hidden"),i.classList.add("hidden"),i.classList.remove("flex"),l.classList.remove("bg-zinc-400"),l.classList.add("bg-indigo-500"),r.classList.remove("bg-indigo-500"),r.classList.add("bg-zinc-400")}function b(){i.classList.remove("hidden"),i.classList.add("flex"),v.classList.add("hidden"),r.classList.remove("bg-zinc-400"),r.classList.add("bg-indigo-500"),l.classList.remove("bg-indigo-500"),l.classList.add("bg-zinc-400")}function B(){l.addEventListener("click",y),r.addEventListener("click",b)}function h(s){const n=document.getElementById("filePlaceholder");n&&(n.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" 
         viewBox="0 0 20 20" 
         class="w-14 h-14 fill-indigo-500">
      <path d="M4 2h8l4 4v12a2 2 0 01-2 2H4a2 2 0 01-2-2V4a2 2 0 012-2z"/>
    </svg>

    <p class="text-sm text-zinc-200 text-center">${s.name}</p>
  `)}function I(){i.addEventListener("click",()=>{a.click()}),i.addEventListener("dragover",s=>{s.preventDefault(),i.classList.add("bg-zinc-600")}),i.addEventListener("dragleave",()=>{i.classList.remove("bg-zinc-600")}),i.addEventListener("drop",s=>{s.preventDefault(),i.classList.remove("bg-zinc-600");const n=s.dataTransfer?.files;n&&n.length>0&&(a.files=n,h(n[0]))}),a.addEventListener("change",()=>{const s=a.files?.[0];s&&h(s)})}function w(){E.addEventListener("submit",F)}async function F(s){if(s.preventDefault(),!i.classList.contains("hidden")){const c=a.files?.[0];if(!c){alert("Please select a file.");return}const o=new FormData;o.append("file",c);try{d.classList.remove("hidden"),d.classList.add("flex"),m.classList.add("hidden"),u.disabled=!0;const t=await(await fetch("/api/process_email/file",{method:"POST",body:o})).json();f.classList.remove("hidden"),f.classList.add("flex"),g.textContent=t.categoria,L.textContent=t.resposta,d.classList.remove("flex"),d.classList.add("hidden"),m.classList.remove("hidden"),u.disabled=!1}catch(e){console.error("Erro no upload:",e)}}else{const c=x.value.trim();if(!c){alert("Please paste or type some text.");return}try{m.classList.add("hidden"),d.classList.remove("hidden"),d.classList.add("flex"),u.disabled=!0;const e=await(await fetch("/api/process_email/text",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:c})})).json();f.classList.remove("hidden"),f.classList.add("flex"),g.textContent=e.categoria,L.textContent=e.resposta,d.classList.remove("flex"),d.classList.add("hidden"),m.classList.remove("hidden"),u.disabled=!1}catch(o){console.error("Erro no envio do texto:",o)}}}function O(){B(),I(),w(),y()}document.addEventListener("DOMContentLoaded",O);
